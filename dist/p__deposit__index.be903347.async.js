"use strict";(self.webpackChunkmucsgo=self.webpackChunkmucsgo||[]).push([[253],{68927:function(te,I,s){s.d(I,{B:function(){return l}});var U=s(36683),l=(0,U.Z)({scriptUrl:["//at.alicdn.com/t/c/font_4204248_ne0cw2rytxj.js"]})},79314:function(te,I,s){s.r(I),s.d(I,{default:function(){return pe}});var U=s(15009),l=s.n(U),re=s(99289),x=s.n(re),ae=s(5574),E=s.n(ae),se=s.p+"static/dep-bg.3bac9862.png",R=s(68927),ce=s(97857),j=s.n(ce),g=s(7363);function we(t,r){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function t(r,i){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/recharge/calculateAmount",_objectSpread({method:"GET",params:_objectSpread({},r)},i||{})));case 1:case"end":return n.stop()}},t)})),k.apply(this,arguments)}function Ce(t,r){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function t(r,i){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/recharge/calculateQuantity",_objectSpread({method:"GET",params:_objectSpread({},r)},i||{})));case 1:case"end":return n.stop()}},t)})),P.apply(this,arguments)}function ie(t){return O.apply(this,arguments)}function O(){return O=x()(l()().mark(function t(r){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.request)("/api/recharge/coupon/rechargeCouponList",j()({method:"GET"},r||{})));case 1:case"end":return a.stop()}},t)})),O.apply(this,arguments)}function ue(t,r){return F.apply(this,arguments)}function F(){return F=x()(l()().mark(function t(r,i){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,g.request)("/api/recharge/makePayment",j()({method:"POST",params:j()({},r)},i||{})));case 1:case"end":return n.stop()}},t)})),F.apply(this,arguments)}function le(t,r){return A.apply(this,arguments)}function A(){return A=x()(l()().mark(function t(r,i){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,g.request)("/api/recharge/paymentState",j()({method:"GET",params:j()({},r)},i||{})));case 1:case"end":return n.stop()}},t)})),A.apply(this,arguments)}function oe(t){return $.apply(this,arguments)}function $(){return $=x()(l()().mark(function t(r){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.request)("/api/recharge/rechargeConfig",j()({method:"GET"},r||{})));case 1:case"end":return a.stop()}},t)})),$.apply(this,arguments)}function de(t){return L.apply(this,arguments)}function L(){return L=x()(l()().mark(function t(r){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.request)("/api/recharge/rechargeDiscountInfo",j()({method:"GET"},r||{})));case 1:case"end":return a.stop()}},t)})),L.apply(this,arguments)}function Ee(t,r){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function t(r,i){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/recharge/useCard",_objectSpread({method:"POST",params:_objectSpread({},r)},i||{})));case 1:case"end":return n.stop()}},t)})),D.apply(this,arguments)}function Ge(t,r){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function t(r,i){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/recharge/useCdkey",_objectSpread({method:"POST",params:_objectSpread({},r)},i||{})));case 1:case"end":return n.stop()}},t)})),B.apply(this,arguments)}var M=s(19515),me=s(6171),d=s(71182),Q=s(17106),h=s(67294),K=s(22920),e=s(85893);function pe(){var t=(0,g.useModel)("user"),r=t.getUser,i=(0,g.useRequest)(function(){return oe()}),a=i.data,n=i.loading,fe=(0,g.useRequest)(function(){return de()}),v=fe.data,ge=(0,h.useState)(),W=E()(ge,2),f=W[0],H=W[1],he=(0,h.useState)(),J=E()(he,2),o=J[0],X=J[1],ve=(0,h.useState)(),q=E()(ve,2),S=q[0],ye=q[1],xe=(0,g.useRequest)(function(){return ie()}),z=xe.data,je=(0,h.useState)(0),_=E()(je,2),T=_[0],ee=_[1],V=a||{},w=V.currencyRateVoList,C=V.rechargeAmountAllowList,Y=V.rechargeChannelList,be=(0,h.useState)(),ne=E()(be,2),Z=ne[0],Ne=ne[1],Se=function(){var c=x()(l()().mark(function m(){var u,p,y;return l()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(S){N.next=3;break}return K.Am.error("\u8BF7\u9009\u62E9\u652F\u4ED8\u65B9\u5F0F"),N.abrupt("return");case 3:return N.next=5,ue({couponId:f==null?void 0:f.id,currencyCode:(o==null?void 0:o.currencyFrom)||"",quantity:T,rechargeChannelId:(S==null?void 0:S.id)||0});case 5:u=N.sent,u.status===0&&((p=u.data)!==null&&p!==void 0&&p.payUrl&&window.open(u.data.payUrl),(y=u.data)!==null&&y!==void 0&&y.orderId&&Ne(u.data.orderId));case 7:case"end":return N.stop()}},m)}));return function(){return c.apply(this,arguments)}}();(0,h.useEffect)(function(){C&&C.length>0&&ee(C[0]),w&&w.length>0&&X(w[0])},[a]);var G=null,Te=function(){var c=x()(l()().mark(function m(u){var p;return l()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,le({orderId:u});case 2:p=b.sent,p.status===0&&(K.Am.success("\u5145\u503C\u6210\u529F"),r(),G&&clearInterval(G));case 4:case"end":return b.stop()}},m)}));return function(u){return c.apply(this,arguments)}}();return(0,h.useEffect)(function(){return Z&&(G=setInterval(function(){Te(Z)},2e3)),function(){G&&clearInterval(G)}},[Z]),(0,e.jsxs)("div",{className:"max-w-[1400px] m-auto px-3 md:px-6",children:[(0,e.jsx)("div",{className:"my-4",children:(0,e.jsxs)("div",{className:"btn btn-sm btn-neutral",onClick:M.hu,children:[(0,e.jsx)(me.Z,{}),(0,e.jsx)(g.FormattedMessage,{id:"common_back"})]})}),!n&&v&&a&&(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,e.jsx)("img",{src:se,className:"w-full h-full hidden lg:block"}),(0,e.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,e.jsxs)(d.v,{as:"div",className:"relative",children:[(0,e.jsxs)(d.v.Button,{className:"select select-sm md:select-md select-accent border-opacity-50 rounded uppercase w-full font-semibold flex justify-between items-center focus:outline-none bg-neutral",children:[(0,e.jsx)("div",{children:"Currency"}),(0,e.jsx)("div",{children:(o==null?void 0:o.currencyFrom)||"please select"})]}),(0,e.jsx)(Q.u,{as:h.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,e.jsx)(d.v.Items,{className:"absolute left-0 mt-2 w-full bg-neutral ring-1 ring-accent rounded origin-top-left p-1 z-50",children:w==null?void 0:w.map(function(c){return(0,e.jsx)(d.v.Item,{children:function(u){var p=u.active;return(0,e.jsx)("div",{className:"".concat(p?"bg-accent bg-opacity-10":""," flex justify-between items-center p-2 text-sm rounded"),onClick:function(){return X(c)},children:c.currencyFrom})}},c.id)})})})]}),(0,e.jsxs)(d.v,{as:"div",className:"relative",children:[(0,e.jsxs)(d.v.Button,{className:"select select-sm md:select-md select-accent border-opacity-50 rounded uppercase w-full font-semibold flex justify-between items-center focus:outline-none bg-neutral",children:[(0,e.jsx)("div",{children:"Recharge channels"}),(0,e.jsx)("div",{children:S?S.channelName:"please select"})]}),(0,e.jsx)(Q.u,{as:h.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,e.jsx)(d.v.Items,{className:"absolute left-0 mt-2 w-full bg-neutral ring-1 ring-accent rounded origin-top-left p-1 z-50",children:Y==null?void 0:Y.map(function(c){return(0,e.jsx)(d.v.Item,{children:function(u){var p=u.active;return(0,e.jsx)("div",{className:"".concat(p?"bg-accent bg-opacity-10":""," flex justify-between items-center p-2 text-sm rounded"),onClick:function(){return ye(c)},children:c.channelName})}},c.rechargeConfigId)})})})]}),(0,e.jsx)("div",{className:"flex gap-2",children:(0,e.jsxs)("span",{className:"text-secondary font-num ml-1 flex gap-1 items-center uppercase",children:["Bonus ",v==null?void 0:v.rechargeDiscount,"%"]})}),(0,e.jsx)("div",{className:"grid grid-cols-3 gap-3 md:gap-6",children:C==null?void 0:C.map(function(c,m){return(0,e.jsxs)("div",{className:"rounded md:rounded-lg bg-gradient-to-r from-[#44425E] to-[#131314] ring-1  hover:ring-accent cursor-pointer overflow-hidden ".concat(c===T?"ring-accent":"ring-transparent"),onClick:function(){ee(c)},children:[(0,e.jsxs)("div",{className:"font-num text-secondary h-14 md:h-28 flex items-center justify-center md:text-2xl",children:[(0,e.jsx)(R.B,{type:"icon-coin",className:"mr-1"})," ",c]}),(0,e.jsxs)("div",{className:"bg-base-100 bg-opacity-50 flex items-center justify-center gap-1 h-6 md:h-12 text-xs md:text-base",children:[(0,e.jsx)(R.B,{type:"icon-gift"}),"+",(0,M.Y6)(c*Number(v==null?void 0:v.rechargeDiscount)/100)]})]},m)})}),(0,e.jsxs)("div",{className:"bg-base-content bg-opacity-10 rounded-lg p-3 md:p-6 flex flex-col gap-6",children:[z&&z.length>0&&(0,e.jsxs)(d.v,{as:"div",className:"relative",children:[(0,e.jsxs)(d.v.Button,{className:"select select-sm md:select-md select-accent border-opacity-50 rounded uppercase w-full font-semibold flex justify-between items-center focus:outline-none bg-neutral",children:[(0,e.jsx)("div",{children:"coupon"}),(0,e.jsx)("div",{children:f?f.couponName:"please Select"})]}),(0,e.jsx)(Q.u,{as:h.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,e.jsxs)(d.v.Items,{className:"absolute left-0 mt-2 w-full bg-neutral ring-1 ring-accent rounded origin-top-left p-1 z-50",children:[z.map(function(c,m){return(0,e.jsx)(d.v.Item,{children:function(p){var y=p.active;return(0,e.jsx)("div",{className:"".concat(y?"bg-accent bg-opacity-10":""," flex justify-between items-center p-2 text-sm rounded cursor-pointer"),onClick:function(){H(c)},children:c.couponName})}},m)}),(0,e.jsx)(d.v.Item,{children:function(m){var u=m.active;return(0,e.jsx)("div",{className:"".concat(u?"bg-accent bg-opacity-10":""," flex justify-between items-center p-2 text-sm rounded cursor-pointer"),onClick:function(){H({})},children:"do not use coupon"})}})]})})]}),(0,e.jsxs)("div",{className:"grid items-center gap-2 md:grid-cols-2",children:[(0,e.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,e.jsx)("div",{className:"uppercase font-semibold text-sm md:text-base",children:"you amout"}),(0,e.jsxs)("div",{className:"text-primary inline-flex gap-1",children:[o==null?void 0:o.symbol,(0,e.jsxs)("span",{children:[" ",((o==null?void 0:o.rate)||0)*T]})]})]}),(0,e.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,e.jsx)("div",{className:"uppercase font-semibold text-sm md:text-base",children:"Actually obtained"}),(0,e.jsxs)("div",{className:"text-secondary font-num",children:[(0,e.jsx)(R.B,{type:"icon-coin",className:"mr-1"}),T,"+",(0,M.Y6)(Number(T)*Number(v==null?void 0:v.rechargeDiscount)/100),(f==null?void 0:f.rechargeDiscount)&&"+".concat(f==null?void 0:f.rechargeDiscount)]})]})]}),(0,e.jsxs)("button",{className:"btn btn-primary btn-sm md:btn-md uppercase w-full rounded font-semibold",onClick:Se,type:"button",children:["pay ",((o==null?void 0:o.rate)||0)*T]})]})]})]})]})}}}]);
